apply plugin: 'java'
apply plugin: 'eclipse'

buildDir = 'target'
repositories {
  mavenCentral()
  mavenLocal()
}

dependencies {
    compile "io.netty:netty:4.0.0.Alpha1-SNAPSHOT"
    testCompile 'junit:junit:4.8.1'
	testCompile 'org.hamcrest:hamcrest-all:1.1'
}

repositories {
    mavenRepo urls: ['https://repository.jboss.org/nexus/content/groups/public/']
}

task server << {
    javaexec {
        classpath sourceSets.main.runtimeClasspath
        setMain 'org.example.server.NettyServer'
    }   
}
server.dependsOn build

task client << {
    javaexec {
        classpath sourceSets.main.runtimeClasspath
        setStandardInput System.in
        setMain 'org.example.client.NettyClient'
    }   
}
client.dependsOn build

task wsserver << {
    javaexec {
        classpath sourceSets.main.runtimeClasspath
        setMain 'org.example.websocket.server.WebSocketServer'
    }   
}
wsserver.dependsOn build

task wrapper(type: Wrapper) {
    group = 'Buildmaster'
    description = "Generates gradlew and gradlew.bat bootstrap scripts"
    gradleVersion = '1.0'
    jarFile = 'wrapper/gradle-wrapper.jar'
}
